module db {
	requires java.sql;
}

create user c@localhost identified by 'password';
	mysql -u c -p
	
select user from mysql.user;
	drop user c@localhost;

CREATE DATABASE testdb CHARACTER SET utf8 COLLATE utf8_bin;
	
grant all on testdb.* to c@localhost;
	revoke all on testdb.* from c@localhost;
	
FLUSH PRIVILEGES;
	SHOW GRANTS FOR c@localhost;
	



SELECT LOAD_FILE('/home/c/Downloads/test.sql');


# the path that can be accessed by LOAD_FILE
select @@GLOBAL.secure_file_priv;
show variables like 'secure_file_priv';
select @@secure_file_priv;

SELECT LOAD_FILE('/var/lib/mysql-files/test.sql');
insert into blobs values( LOAD_FILE('/var/lib/mysql-files/test.sql'));

show variables like 'max_allowed_packet';
mysql --max_allowed_packet=32M
SET GLOBAL max_allowed_packet=524288000;


[mysqld]
max_allowed_packet=128M


# display table columns
desc blobs;
SHOW FULL COLUMNS FROM blobs;






create table Data (id int auto_increment primary key, data longblob);
insert into Data (data) values (0x19c0300dc90e7cedf64703ed8ae8683b);
insert into Data values (null,0x19c0300dc90e7cedf64703ed8ae8683c);
insert into Data values (0,0x19c0300dc90e7cedf64703ed8ae8683c);
insert into Data values ();
update Data set data=0x19c0300dc90e7cedf64703ed8ae8683d where id=6;

insert into Data values(null, LOAD_FILE('/var/lib/mysql-files/test.mp3'));

show indexes from File;
create index User_files on File(User_files);
alter table File drop index User_files;


create index User_refFiles on User_refFiles(User);

drop table User;drop table File;drop table Data;drop table User_refFiles;



explain select t3.* from User as t1, File as t3, User_refFiles as t2 where t1.id=1 and t1.id=t2.User and t2.File=t3.id order by t3.created_ts desc;

explain select t2.* from User as t1, File as t2 where t1.id=1 and t1.id=t2.User_files order by t2.created_ts desc;
create index User_files on File(User_files);
